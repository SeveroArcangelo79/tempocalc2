<!DOCTYPE html><html lang="es"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Calculadora de Tempo, metr√≥nomo y otras variables</title><style>:root{--background:#ECECEC;--frame:#F5F5F5;--text:#212121;--accent_primary:#3E5363;--accent_secondary:#FFFFFF;--button:#DCDCDC;--button_active:#3E5363;--border:#D0D0D0}html,body{height:100%}body{margin:0;background:var(--background);color:var(--text);font-family:"Segoe UI",system-ui,-apple-system,Arial,sans-serif}#app{width:min(900px,calc(100% - 20px));margin:10px auto;padding:10px}.notebook{background:0 0;border-radius:10px}.tabbar{display:flex;gap:6px;flex-wrap:wrap;padding:6px}.tabbtn{border:1px solid var(--border);background:var(--button);color:var(--text);padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:600}.tabbtn.active{background:var(--accent_primary);color:var(--accent_secondary);border-color:transparent}.tab{display:none;padding:14px;background:0 0}.tab.active{display:block}.row{display:flex;gap:10px;align-items:center;flex-wrap:wrap;justify-content:center}.row.left{justify-content:flex-start}.spacer{height:10px}.group{background:0 0;border:1px solid var(--border);border-radius:10px;padding:12px}.group-title{font-weight:700;margin:-2px 0 10px 0}#bpm_label{text-align:center;font-size:34px;font-weight:800;margin:10px 0 6px}#tap_zone{display:block;margin:8px auto 2px;cursor:pointer}.hint{text-align:center;font-size:12px;color:#666;margin-top:4px}button,.btn{border:1px solid var(--border);background:var(--button);color:var(--text);border-radius:10px;padding:8px 12px;cursor:pointer;font-weight:600}button:active{transform:translateY(1px)}#metro_btn{width:260px;padding:10px 12px;font-size:15px;font-weight:800;border-radius:12px}.btn-active{background:var(--button_active)!important;color:var(--accent_secondary)!important;border-color:transparent!important}input[type=text],input[type=number],select{border:1px solid var(--border);border-radius:10px;padding:8px 10px;background:#fff;color:var(--text);font-size:14px}input.center{text-align:center}input.small{width:90px}input.mid{width:140px}select{cursor:pointer}label.chk{display:flex;align-items:center;gap:8px;cursor:pointer;user-select:none}.radio-row{display:flex;gap:14px;align-items:center;flex-wrap:wrap;justify-content:center}.vsep{width:1px;height:22px;background:var(--border);display:inline-block;margin:0 6px}input[type=range]{width:220px}#calc_text{width:100%;height:640px;box-sizing:border-box;background:var(--frame);color:var(--text);border:0;border-radius:12px;padding:12px;font-family:"Courier New",ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:13px;outline:0;resize:vertical;white-space:pre;overflow:auto}.form-grid{display:grid;grid-template-columns:auto auto;gap:10px 12px;align-items:center;justify-content:center}.form-grid .label{justify-self:end;color:#333;font-weight:600}.result{background:0 0;text-align:center;font-weight:700;white-space:pre-wrap}.subtle{color:#777;font-size:12px;text-align:center}hr.sep{border:0;border-top:1px solid var(--border);margin:18px 0}</style></head><body><div id="app"><div class="notebook"><div class="tabbar"><button class="tabbtn active" data-tab="tap_tab">Calculadora & Metr√≥nomo</button><button class="tabbtn" data-tab="calc_tab">C√°lculos & Modulaci√≥n</button><button class="tabbtn" data-tab="wave_tab">Longitud de Onda</button><button class="tabbtn" data-tab="storage_tab">Flujo de Datos</button><button class="tabbtn" data-tab="samples_tab">Muestras</button></div><section class="tab active" id="tap_tab"><div id="bpm_label">Tempo / BPM: --</div><canvas id="tap_zone" width="150" height="150"></canvas><div class="hint">Click Izq. / Barra Espaciadora</div><div class="spacer"></div><div class="group"><div class="group-title">Metr√≥nomo</div><div class="row"><button id="metro_btn">Iniciar Metr√≥nomo</button></div><div class="spacer"></div><div class="row"><div style="font-weight:700">Nivel:</div><input id="vol_scale" type="range" min="0" max="100" step="1"/><div id="vol_value" style="min-width:36px;font-weight:700"></div></div></div><div class="spacer"></div><div class="row"><div class="row"><div style="font-weight:700">Comp√°s:</div><select id="time_signature"><option>2/4</option><option>3/4</option><option selected>4/4</option><option>5/4</option><option>6/8</option><option>7/8</option></select></div><label class="chk"><input id="use_accent" type="checkbox"/><span style="font-weight:700">Acento</span></label></div><div class="spacer"></div><div class="radio-row"><label class="chk"><input type="radio" name="rounding_method" id="round_redondear" value="Redondear"/> Redondear</label><label class="chk"><input type="radio" name="rounding_method" id="round_truncar" value="Truncar"/> Truncar</label><span class="vsep" aria-hidden="true"></span><label class="chk"><input type="radio" name="number_type" id="num_enteros" value="Enteros"/> Enteros</label><label class="chk"><input type="radio" name="number_type" id="num_decimales" value="Decimales"/> Decimales</label></div><div class="spacer"></div><div class="row"><div class="group"><div class="row left" style="flex-direction:column;gap:6px"><button id="btn_div2" class="btn" style="width:70px">/2</button><button id="btn_div3" class="btn" style="width:70px">/3</button><button id="btn_div4" class="btn" style="width:70px">/4</button></div></div><div class="group"><div style="font-weight:800;text-align:center">BPM Manual</div><div class="spacer"></div><input id="manual_bpm_entry" class="center small" type="text" inputmode="decimal"/><div class="spacer"></div><button id="btn_aplicar" class="btn" style="width:120px">Aplicar</button></div><div class="group"><div class="row left" style="flex-direction:column;gap:6px"><button id="btn_x2" class="btn" style="width:70px">x2</button><button id="btn_x3" class="btn" style="width:70px">x3</button><button id="btn_x4" class="btn" style="width:70px">x4</button></div></div></div><div class="spacer"></div><div class="row"><button id="btn_reset" class="btn">Reiniciar (R)</button></div><div class="subtle" style="margin-top:10px">Atajos: <b>Espacio</b> Tap ¬∑ <b>R</b> Reiniciar</div></section><section class="tab" id="calc_tab"><textarea id="calc_text" readonly></textarea></section><section class="tab" id="wave_tab"><div style="text-align:center;font-weight:900;font-size:18px;margin-bottom:12px">Calculadora de Longitud de Onda (Œª)</div><div class="group" style="max-width:520px;margin:0 auto"><div class="form-grid"><div class="label">Frecuencia (Hz):</div><input id="wave_freq_entry" class="mid" type="text" inputmode="decimal"/></div><div class="spacer"></div><div class="row"><button id="btn_wave_calc" class="btn">Calcular</button></div></div><div class="spacer"></div><div id="wave_result_label" class="result"></div><div class="subtle" style="margin-top:18px"></div></section><section class="tab" id="storage_tab"><div style="text-align:center;font-weight:900;font-size:18px;margin-bottom:12px">Calculadora de Flujo de Datos</div><div class="form-grid"><div class="label">Frec. de Muestreo:</div><select id="sr_combo"><option>44100</option><option selected>48000</option><option>88200</option><option>96000</option><option>176400</option><option>192000</option></select><div class="label">Resoluci√≥n (Bits):</div><select id="bd_combo"><option>16</option><option selected>24</option><option>32</option></select><div class="label">Cant. de Canales:</div><input id="tracks_entry" class="small center" type="text" inputmode="numeric" value="1"/><div class="label">Duraci√≥n (Minutos):</div><input id="mins_entry" class="small center" type="text" inputmode="decimal" value="1"/></div><hr class="sep"/><div style="text-align:center;font-weight:900;font-size:16px;margin-bottom:10px">Estimaci√≥n MP3 (Stereo Mixdown)</div><div class="row"><div style="font-weight:800">Calidad MP3:</div><select id="mp3_combo"><option>96 kbps</option><option>128 kbps</option><option>160 kbps</option><option>192 kbps</option><option>256 kbps</option><option selected>320 kbps</option></select></div><div class="spacer"></div><div class="row"><button id="btn_storage_calc" class="btn">Calcular Espacio (WAV + MP3)</button></div><div class="spacer"></div><div id="storage_result_label" class="result">--</div></section><section class="tab" id="samples_tab"><div style="text-align:center;font-weight:900;font-size:18px;margin-bottom:12px">Calculadora de Muestras</div><div class="form-grid"><div class="label">Frec. de Muestreo:</div><select id="samp_sr_combo"><option>44100</option><option selected>48000</option><option>88200</option><option>96000</option><option>192000</option></select><div class="label">Tiempo (ms):</div><input id="samp_ms_entry" class="small center" type="text" inputmode="decimal"/></div><div class="spacer"></div><div class="row"><button id="btn_samples_calc" class="btn">Calcular Muestras</button></div><div class="spacer"></div><div id="samples_result_label" class="result">-- Muestras / Samples</div><div class="subtle" style="margin-top:16px"></div></section></div></div><script>
!function(){"use strict";let g=e=>document.getElementById(e),qs=e=>document.querySelectorAll(e);
class O{constructor(e=44100){this.s=e,this.x=null,this.h=null,this.l=null}i(){if(!this.x){this.x=new(window.AudioContext||window.webkitAudioContext),this.s=this.x.sampleRate,this.h=this.w(1200,.05),this.l=this.w(800,.04)}"suspended"===this.x.state&&this.x.resume().catch(()=>{})}w(t,s){let a=Math.max(1,Math.floor(this.s*s)),r=this.x.createBuffer(1,a,this.s),n=r.getChannelData(0);for(let e=0;e<a;e++){let h=e/this.s,l=.5*Math.sin(2*Math.PI*t*h),c=Math.exp(-40*h);n[e]=l*c}return r}p(e,t){this.i();let s=Math.pow(t/100,2),a=e?this.h:this.l;try{let r=this.x.createBufferSource();r.buffer=a;let n=this.x.createGain();n.gain.value=s,r.connect(n).connect(this.x.destination),r.start()}catch(h){console.log("Error audio",h)}}}
class H{constructor(e,t){this.a=e,this.g=t,this.r=!1,this.p=0,this.n=0,this.tm=null}run(){this.r=!0,this.p=0,this.n=performance.now()+50,this.lp()}stop(){this.r=!1,this.tm&&(clearTimeout(this.tm),this.tm=null)}lp(){if(!this.r)return;let e=this.a.bpm;if(!(e>0))return void(this.tm=setTimeout(()=>this.lp(),100));let t=6e4/e,s=4;try{s=parseInt(this.a.ts.split("/")[0],10),(!Number.isFinite(s)||s<=0)&&(s=4)}catch(a){s=4}let r=0===this.p%s&&this.a.ua;this.g.p(r,this.a.vl),this.p++,this.n+=t;let n=performance.now(),i=this.n-n;i<-100&&(this.n=performance.now(),i=0),this.tm=setTimeout(()=>this.lp(),Math.max(0,i))}}
class N{constructor(){this.tt=[],this.bpm=0,this.rm="Redondear",this.nt="Enteros",this.ts="4/4",this.ua=!0,this.vl=80,this.mn=!1,this.ag=new O,this.mt=new H(this,this.ag),this.dom={l:g("bpm_label"),z:g("tap_zone"),b:g("metro_btn"),v:g("vol_scale"),vv:g("vol_value"),s:g("time_signature"),c:g("use_accent"),me:g("manual_bpm_entry"),ct:g("calc_text"),we:g("wave_freq_entry"),wl:g("wave_result_label"),sc:g("sr_combo"),bc:g("bd_combo"),te:g("tracks_entry"),mn:g("mins_entry"),mp:g("mp3_combo"),sl:g("storage_result_label"),ss:g("samp_sr_combo"),se:g("samp_ms_entry"),srl:g("samples_result_label")},this.ini(),this.dr(),this.ev(),this.rst()}
ini(){this.dom.v.value=String(this.vl),this.dom.vv.textContent=String(Math.round(this.vl)),this.dom.s.value=this.ts,this.dom.c.checked=this.ua,g("round_redondear").checked=!0,g("num_enteros").checked=!0}
dr(){let e=this.dom.z.getContext("2d");e.clearRect(0,0,150,150),e.fillStyle="#3E5363",e.beginPath(),e.arc(75,75,70,0,2*Math.PI),e.fill(),e.fillStyle="#FFFFFF",e.textAlign="center",e.textBaseline="middle",e.font="12px Segoe UI",e.fillText("Click Izq.",75,68),e.fillText("Barra Espaciadora",75,84)}
ev(){qs(".tabbtn").forEach(e=>e.addEventListener("click",()=>{qs(".tabbtn").forEach(t=>t.classList.toggle("active",t===e));let t=new Map(Array.from(qs(".tab")).map(e=>[e.id,e]));t.forEach((t,s)=>t.classList.toggle("active",s===e.dataset.tab)),"tap_tab"===e.dataset.tab&&this.dom.z.focus?.()})),this.dom.z.addEventListener("click",e=>this.tap(e)),window.addEventListener("keydown",e=>{"Space"===e.code?(e.preventDefault(),this.tap()):"r"===e.key||"R"===e.key?this.rst():0}),this.dom.b.addEventListener("click",()=>this.tgl()),this.dom.v.addEventListener("input",e=>{this.vl=parseFloat(e.target.value),this.dom.vv.textContent=String(Math.round(this.vl))}),this.dom.s.addEventListener("change",e=>{this.ts=e.target.value,this.upd()}),this.dom.c.addEventListener("change",e=>{this.ua=!!e.target.checked});
let set=(id,k,v)=>{g(id).addEventListener("change",()=>{this[k]=v,this.upd()})};set("round_redondear","rm","Redondear"),set("round_truncar","rm","Truncar"),set("num_enteros","nt","Enteros"),set("num_decimales","nt","Decimales"),this.dom.me.addEventListener("input",e=>{let t=e.target.value;if(""!==t){t.replace(",",".");Number.isFinite(Number(t.replace(",",".")))||(e.target.value=t.slice(0,-1))}}),this.dom.me.addEventListener("keydown",e=>"Enter"===e.key?this.sman():0),g("btn_aplicar").addEventListener("click",()=>this.sman());let mod=(id,f)=>g(id).addEventListener("click",()=>this.mbpm(f));mod("btn_div2",.5),mod("btn_div3",1/3),mod("btn_div4",.25),mod("btn_x2",2),mod("btn_x3",3),mod("btn_x4",4),g("btn_reset").addEventListener("click",()=>this.rst()),this.dom.we.addEventListener("keydown",e=>"Enter"===e.key?this.cwav():0),g("btn_wave_calc").addEventListener("click",()=>this.cwav()),g("btn_storage_calc").addEventListener("click",()=>this.csto()),this.dom.se.addEventListener("keydown",e=>"Enter"===e.key?this.csam():0),g("btn_samples_calc").addEventListener("click",()=>this.csam())}
tgl(){this.bpm>0&&(this.mn=!this.mn,this.mn?(this.dom.b.textContent="Detener Metr√≥nomo",this.dom.b.classList.add("btn-active"),this.mt.run()):(this.dom.b.textContent="Iniciar Metr√≥nomo",this.dom.b.classList.remove("btn-active"),this.mt.stop()))}
sman(){try{let e=Number(this.dom.me.value.trim().replace(",","."));e>0&&(this.bpm=e,this.upd())}catch(e){}}
mbpm(e){let t=this.bpm;t>0&&(this.bpm=t*e,this.upd())}
upd(){let e=this.bpm;if(!(e>0)){this.dom.l.textContent="Tempo / BPM: --",this.mn&&this.tgl();return}let t;t="Enteros"===this.nt?"Redondear"===this.rm?Math.round(e):Math.trunc(e):"Redondear"===this.rm?Math.round(10*e)/10:Math.trunc(10*e)/10,this.dom.l.textContent=`Tempo / BPM: ${t}`,this.cal(e)}
tap(e){let t=performance.now();if(this.tt.push(t),this.tt.length>10&&this.tt.shift(),this.tt.length>=2){let s=[],a=0;for(let r=1;r<this.tt.length;r++)s.push(this.tt[r]-this.tt[r-1]);a=s.reduce((e,t)=>e+t,0)/s.length,a>0&&(this.bpm=6e4/a,this.upd())}}
rst(){this.tt=[],this.bpm=0,this.dom.me.value="",this.dom.l.textContent="Tempo / BPM: --",this.mn&&this.tgl(),this.dom.ct.value=""}
cal(e){let t=6e4/e,s=this.ts.split("/").map(e=>parseInt(e,10)),a=Number.isFinite(s[0])?s[0]:4,r=Number.isFinite(s[1])?s[1]:4,n,i,o;
"6/8"===this.ts?(n=1.5*t,i=2,o="Negra con Puntillo"):(n=t,i=a*(4/r),o="Negra");let h=n*i,l="";l+=`üéß BPM: ${e.toFixed(2)} | Comp√°s: ${this.ts} ‚Üí ${n.toFixed(2)} ms por ${o}\n\n\n`,l+="--- Tiempos para Delay & Modulaci√≥n (LFO) ---\n\n",l+=`${"Duraci√≥n".padEnd(18)}${"Entero".padEnd(14)}${"Puntillo".padEnd(14)}${"Tresillo".padEnd(14)}${"Modulaci√≥n".padEnd(12)}\n`,l+="-".repeat(80)+"\n";let c={"1/1":4,"1/2":2,"1/4":1,"1/8":.5,"1/16":.25,"1/32":.125},d={"1/1":"Redonda","1/2":"Blanca","1/4":"Negra","1/8":"Corchea","1/16":"Semicor.","1/32":"Fusa"};for(let p of Object.keys(c)){let u=c[p],m=n*u,b=1.5*m,y=2*m/3,x=m>0?1e3/m:0,k=`${p} - ${String(d[p]).padEnd(8)}`;l+=`${k}${m.toFixed(2).padEnd(12)}${b.toFixed(2).padEnd(14)}${y.toFixed(2).padEnd(14)}${x.toFixed(2)} Hz\n\n`}l+="\n--- Reverb ---\n\n";let f={"Small Room (1/4 Comp√°s)":.25,"Medium Room (1/2 Comp√°s)":.5,"Big Room (1 Comp√°s)":1,"Large Hall (2 Compases)":2};for(let v of Object.keys(f))l+=`${v.padEnd(30)} ‚Üí RT60: ${(h*f[v]).toFixed(2)} ms\n`;this.dom.ct.value=l}
cwav(){try{let e=Number(this.dom.we.value.trim().replace(",","."));if(e>0){let t=343/e,s=100*t;this.dom.wl.textContent=`Frecuencia: ${e} Hz\n\nLongitud (Metros):  ${t.toFixed(4)} m\nLongitud (cm):      ${s.toFixed(2)} cm`}else this.dom.wl.textContent="La frecuencia debe ser mayor a 0."}catch(e){this.dom.wl.textContent="Error: Por Favor. Ingresa un n√∫mero v√°lido."}}
csto(){try{let e=parseInt(this.dom.sc.value,10),t=parseInt(this.dom.bc.value,10),s=parseInt(String(this.dom.te.value).trim(),10),a=Number(String(this.dom.mn.value).trim().replace(",","."));if(!(s>=1)||!(a>0))return void(this.dom.sl.textContent="Revisa los valores ingresados.");let r=60*a,n=e*t*s*r,i=n/8,o=i/1048576,h=i/1073741824,l=parseInt(this.dom.mp.value.split(" ")[0],10),c=1e3*l*r/8/1048576,d=`--- Formato RAW (WAV/AIFF) ---\nCanales: ${s} | ${e/1e3}kHz | ${t}bit\nEspacio Requerido: ${o.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2})} MB  (${h.toLocaleString(void 0,{maximumFractionDigits:3,minimumFractionDigits:3})} GB)\n\n--- Formato MP3 (Stereo Mixdown) ---\nCalidad: ${l} kbps (Stereo)\nTama√±o Archivo: ${c.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2})} MB`;this.dom.sl.textContent=d}catch(e){this.dom.sl.textContent="Error: Por favor. Ingresa n√∫meros v√°lidos."}}
csam(){try{let e=parseInt(this.dom.ss.value,10),t=Number(String(this.dom.se.value).trim().replace(",",".")),s=t/1e3*e;this.dom.srl.textContent=`${Math.trunc(s)} Muestras (Samples)`}catch(e){this.dom.srl.textContent="Error de Ingreso"}}}
new N}();</script></body></html>